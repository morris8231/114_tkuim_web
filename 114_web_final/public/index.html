<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>攝影章節式任務學習系統</title>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&family=Outfit:wght@300;400;600&display=swap"
        rel="stylesheet">
    <!-- Main CSS -->
    <link rel="stylesheet" href="css/style.css">
</head>

<body>

    <header class="app-header">
        <div class="container">
            <h1 class="logo" onclick="app.showView('chapters-view')" style="cursor: pointer;" title="Back to Home">
                PhotoMission <span>Beta</span></h1>
            <nav class="main-nav" id="main-nav">
                <button class="nav-btn active" data-target="chapters-view">學習章節</button>
                <button class="nav-btn" data-target="gallery-view">我的作品</button>
                <button class="nav-btn" data-target="review-view">每月回顧</button>
                <button class="nav-btn" id="login-btn" data-target="auth-view">登入</button>
                <button class="nav-btn hidden" id="logout-btn" onclick="app.logout()">登出</button>
            </nav>
            <div class="user-stats hidden" id="user-stats-header"
                style="display: flex; align-items: center; gap: 10px;">
                <!-- Injected via JS -->
                <span class="level-badge"
                    style="background: #000; color: #fff; padding: 2px 8px; font-weight: bold; font-size: 0.8rem;">LV.1</span>
                <div class="xp-container" style="width: 100px; height: 8px; background: #eee; border-radius: 4px;">
                    <div class="xp-bar" style="width: 0%; height: 100%; background: #4CAF50; border-radius: 4px;"></div>
                </div>
            </div>
        </div>
    </header>

    <main class="container">
        <!-- View: Chapters List -->
        <section id="chapters-view" class="view-section active">
            <div class="section-header">
                <h2>探索章節</h2>
                <p>循序漸進，掌握攝影的每一個細節</p>
            </div>


            <!-- Featured Video Section Header -->
            <div style="margin: 40px 0 20px 0;">
                <h3 style="font-size: 1.3rem; font-weight: 700; color: #000; margin-bottom: 5px;">精選影片</h3>
                <p style="font-size: 0.9rem; color: #666;">Featured Video</p>
            </div>

            <!-- Featured Chapter Video -->
            <div class="featured-video-section"
                style="margin-bottom: 40px; border-radius: 12px; overflow: hidden; background: #fff; box-shadow: 0 4px 12px rgba(0,0,0,0.05);">
                <div class="featured-content" style="display: flex; flex-wrap: wrap;">
                    <div class="video-container" style="flex: 6; min-width: 300px; position: relative;">
                        <!-- YouTube Video Embed -->
                        <div class="video-embed"
                            style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; background: #000;">
                            <iframe id="featured-video-iframe"
                                style="position: absolute; top:0; left:0; width: 100%; height: 100%;"
                                src="https://www.youtube.com/embed/ChlwMDbVjGU?start=188" title="所以說，淺景深怎麼了嗎？"
                                frameborder="0"
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                                allowfullscreen>
                            </iframe>
                        </div>
                    </div>
                    <div class="info-container"
                        style="flex: 4; padding: 30px; display: flex; flex-direction: column; justify-content: center; min-width: 250px;">
                        <span class="highlight-tag"
                            style="font-size: 0.8rem; letter-spacing: 1px; color: #666; font-weight: bold; margin-bottom: 10px;">CHAPTER
                            5-4</span>
                        <h3 class="featured-title" style="font-size: 1.5rem; margin-bottom: 15px; font-weight: 700;">
                            所以說，淺景深怎麼了嗎？</h3>
                        <p class="featured-desc" style="color: #666; line-height: 1.6; margin-bottom: 25px;">
                            從觀念層面重新思考「淺景深是否一定比較好」，說明景深應依畫面需求選擇，透過實例比較不同景深對人像氛圍與故事感的影響。</p>
                        <a href="https://www.youtube.com/watch?v=ChlwMDbVjGU&t=188s" target="_blank"
                            rel="noopener noreferrer" class="btn-featured"
                            style="align-self: flex-start; background: #000; color: #fff; border: none; padding: 10px 24px; border-radius: 6px; cursor: pointer; font-weight: 500; text-decoration: none; display: inline-block;">在
                            YouTube 觀看</a>
                    </div>
                </div>
            </div>
            <div id="chapters-container" class="grid-layout">
                <!-- Chapters will be injected here -->
                <div class="loading-spinner">載入中...</div>
            </div>

            <!-- Contact Us Section -->
            <div class="contact-section" style="margin-top: 60px; margin-bottom: 40px;">
                <div class="contact-card"
                    style="max-width: 600px; margin: 0 auto; background: #fff; padding: 40px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); text-align: center;">
                    <div class="contact-header" style="margin-bottom: 30px;">
                        <span class="contact-label"
                            style="font-size: 0.8rem; letter-spacing: 1px; color: #666; display: block; margin-bottom: 5px;">CONTACT</span>
                        <h3 style="font-size: 1.8rem; margin-bottom: 10px;">聯絡我們</h3>
                        <p style="color: #666; margin-bottom: 20px;">對課程有疑問？或是有合作提案？歡迎填寫表單告訴我們。</p>

                        <!-- Social Media Contact -->
                        <div class="social-contact"
                            style="display: flex; justify-content: center; align-items: center; gap: 15px; margin-top: 20px; padding: 15px; background: #f9f9f9; border-radius: 8px;">
                            <span style="font-size: 0.9rem; color: #666; font-weight: 500;">或透過社群媒體聯絡：</span>
                            <a href="https://www.instagram.com/yue.do_?igsh=MTdkOW0yYndwZ21ucA==" target="_blank"
                                rel="noopener noreferrer"
                                style="display: inline-flex; align-items: center; gap: 8px; padding: 8px 16px; background: #000; color: white; text-decoration: none; border-radius: 6px; font-weight: 500; transition: all 0.2s; border: 2px solid #000;"
                                onmouseover="this.style.background='#fff'; this.style.color='#000'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.15)';"
                                onmouseout="this.style.background='#000'; this.style.color='#fff'; this.style.transform='translateY(0)'; this.style.boxShadow='none';">
                                <!-- Instagram Icon SVG -->
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <rect x="2" y="2" width="20" height="20" rx="5" stroke="currentColor"
                                        stroke-width="2" />
                                    <circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="2" />
                                    <circle cx="18" cy="6" r="1.5" fill="currentColor" />
                                </svg>
                                <span>@yue.do_</span>
                            </a>
                        </div>
                    </div>

                    <!-- Divider -->
                    <div style="margin: 30px 0; border-top: 1px solid #e0e0e0;"></div>
                    <form id="contact-form" class="contact-form"
                        onsubmit="event.preventDefault(); app.handleContactSubmit(event);" style="text-align: left;">
                        <div class="form-group" style="margin-bottom: 15px;">
                            <input type="text" name="name" placeholder="姓名 Name" required
                                style="width: 100%; padding: 12px; border: none; background: #F5F5F5; border-radius: 6px; font-size: 1rem;">
                        </div>
                        <div class="form-group" style="margin-bottom: 15px;">
                            <input type="email" name="email" placeholder="電子郵件 Email" required
                                style="width: 100%; padding: 12px; border: none; background: #F5F5F5; border-radius: 6px; font-size: 1rem;">
                        </div>
                        <div class="form-group" style="margin-bottom: 15px;">
                            <input type="text" name="subject" placeholder="主旨 Subject" required
                                style="width: 100%; padding: 12px; border: none; background: #F5F5F5; border-radius: 6px; font-size: 1rem;">
                        </div>
                        <div class="form-group" style="margin-bottom: 25px;">
                            <textarea name="message" rows="5" placeholder="訊息內容 Message" required
                                style="width: 100%; padding: 12px; border: none; background: #F5F5F5; border-radius: 6px; font-size: 1rem; resize: vertical; font-family: inherit;"></textarea>
                        </div>
                        <button type="submit" class="btn-submit"
                            style="width: 100%; padding: 12px; background: #000; color: #fff; border: none; border-radius: 6px; font-size: 1rem; font-weight: bold; cursor: pointer; transition: background 0.3s;">發送訊息</button>
                    </form>
                </div>
            </div>
        </section>

        <!-- View: Task List (Inside a Chapter) -->
        <section id="tasks-view" class="view-section hidden">
            <div class="back-link" onclick="app.showView('chapters-view')">← 返回章節列表</div>
            <div class="chapter-info-card">
                <h2 id="current-chapter-title">章節標題</h2>
                <p id="current-chapter-desc">章節說明...</p>
            </div>
            <div id="tasks-container" class="list-layout">
                <!-- Tasks will be injected here -->
            </div>
        </section>

        <!-- View: Task Detail & Submission -->
        <section id="submission-view" class="view-section hidden">
            <div class="back-link" onclick="app.showView('tasks-view')">← 返回任務列表</div>
            <div class="split-layout">
                <div class="task-instructions">
                    <span class="badge" id="task-difficulty">難度 1</span>
                    <h2 id="task-title">任務標題</h2>
                    <div class="concept-card">
                        <h3>觀念 Concept</h3>
                        <p id="task-concept">這裡會顯示攝影觀念...</p>
                    </div>
                    <div class="instruction-box">
                        <h3>拍攝指引</h3>
                        <p id="task-instructions">如何拍攝...</p>
                        <ul id="task-constraints">
                            <!-- constraints -->
                        </ul>
                    </div>
                </div>

                <div class="submission-form-container">
                    <h3>提交作品</h3>
                    <form id="submission-form">
                        <input type="hidden" id="submit-task-id" name="taskId">

                        <div class="form-group">
                            <label>上傳照片 (Max 5)</label>
                            <input type="file" id="submit-photos" name="photos" multiple accept="image/*" required>
                        </div>

                        <div class="form-group">
                            <label>題材分類</label>
                            <select id="submit-subject" name="subject">
                                <option value="portrait">人像 (Portrait)</option>
                                <option value="landscape">風景 (Landscape)</option>
                                <option value="still">靜物 (Still Life)</option>
                                <option value="street">街拍 (Street)</option>
                                <option value="other">其他</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>自我評分 (1-5)</label>
                            <div class="range-group">
                                <span>清晰度</span> <input type="range" name="rating_sharpness" min="1" max="5" value="3">
                            </div>
                            <div class="range-group">
                                <span>曝光</span> <input type="range" name="rating_exposure" min="1" max="5" value="3">
                            </div>
                            <div class="range-group">
                                <span>構圖</span> <input type="range" name="rating_composition" min="1" max="5" value="3">
                            </div>
                            <div class="range-group">
                                <span>光線</span> <input type="range" name="rating_lighting" min="1" max="5" value="3">
                            </div>
                        </div>

                        <div class="form-group">
                            <label>反思心得</label>
                            <textarea id="submit-reflection" name="reflection" rows="3"
                                placeholder="這次拍攝你學到了什麼？遇到了什麼困難？"></textarea>
                        </div>

                        <div class="form-group hidden" style="display: none;">
                            <input type="checkbox" id="submit-is-public" name="isPublic" style="width: auto;">
                            <label for="submit-is-public" style="margin: 0;">📢 公開此作品（讓其他使用者可以看到並按讚）</label>
                        </div>

                        <button type="submit" class="btn-primary">提交任務</button>
                    </form>
                </div>
            </div>
        </section>

        <!-- View: Gallery -->
        <section id="gallery-view" class="view-section hidden">
            <div class="section-header">
                <h2>作品牆</h2>
                <p>記錄你的每一次快門</p>
            </div>
            <!-- Tab Switcher (Removed Public) -->
            <div class="tab-switcher" style="margin: 20px 0; text-align: center; display: none;">
                <button class="tab-btn active" data-tab="my" onclick="app.switchGalleryTab('my')">我的作品</button>
                <!-- <button class="tab-btn" data-tab="public" onclick="app.switchGalleryTab('public')">公開作品</button> -->
            </div>
            <div id="gallery-container" class="masonry-layout">
                <!-- Gallery items injected here -->
                <div class="empty-state">暫無作品</div>
            </div>
        </section>

        <!-- View: Monthly Review -->
        <section id="review-view" class="view-section hidden">
            <div class="section-header">
                <h2>每月回顧</h2>
                <p>檢視成長軌跡</p>
            </div>
            <div class="review-dashboard">
                <!-- Overview Cards -->
                <div class="stats-overview">
                    <div class="stat-card">
                        <h3>本月任務完成</h3>
                        <span class="stat-value" id="review-task-count">0</span>
                        <span class="stat-change" id="review-task-change">--</span>
                    </div>
                    <div class="stat-card">
                        <h3>累積拍攝張數</h3>
                        <span class="stat-value" id="review-photo-count">0</span>
                        <span class="stat-change" id="review-photo-change">--</span>
                    </div>
                    <div class="stat-card">
                        <h3>章節解鎖進度</h3>
                        <span class="stat-value" id="review-chapter-progress">0/8</span>
                    </div>
                </div>

                <!-- Detailed Analysis -->
                <div class="split-layout" style="margin-top: 40px;">
                    <!-- Skill Analysis -->
                    <div class="analysis-card">
                        <h3>📸 攝影能力雷達</h3>
                        <div class="skill-bars">
                            <div class="skill-item">
                                <label>清晰度 (Sharpness)</label>
                                <div class="progress-bg">
                                    <div class="progress-fill" id="skill-sharpness" style="width: 0%"></div>
                                </div>
                            </div>
                            <div class="skill-item">
                                <label>曝光 (Exposure)</label>
                                <div class="progress-bg">
                                    <div class="progress-fill" id="skill-exposure" style="width: 0%"></div>
                                </div>
                            </div>
                            <div class="skill-item">
                                <label>構圖 (Composition)</label>
                                <div class="progress-bg">
                                    <div class="progress-fill" id="skill-composition" style="width: 0%"></div>
                                </div>
                            </div>
                            <div class="skill-item">
                                <label>光線 (Lighting)</label>
                                <div class="progress-bg">
                                    <div class="progress-fill" id="skill-lighting" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Learning Path -->
                    <div class="analysis-card">
                        <h3>📈 學習軌跡</h3>
                        <ul id="review-recent-activity" class="activity-list">
                            <li>載入中...</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- View: Admin Dashboard -->
        <section id="admin-view" class="view-section hidden">
            <div class="section-header">
                <h2>🔧 管理員儀表板</h2>
                <p>網站統計數據</p>
            </div>

            <div class="stats-grid"
                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 30px;">
                <div class="stat-card"
                    style="background: #f5f5f5; padding: 30px; border-radius: 8px; text-align: center;">
                    <h3 style="font-size: 1rem; color: #666; margin-bottom: 10px;">📊 網站瀏覽次數</h3>
                    <div id="admin-page-views" style="font-size: 3rem; font-weight: bold; color: #000;">0</div>
                    <small style="color: #999;">Total Page Views</small>
                </div>

                <div class="stat-card"
                    style="background: #f5f5f5; padding: 30px; border-radius: 8px; text-align: center;">
                    <h3 style="font-size: 1rem; color: #666; margin-bottom: 10px;">👥 活躍帳戶</h3>
                    <div id="admin-active-users" style="font-size: 3rem; font-weight: bold; color: #4CAF50;">0</div>
                    <small style="color: #999;">Active in last 30 days</small>
                </div>

                <div class="stat-card"
                    style="background: #f5f5f5; padding: 30px; border-radius: 8px; text-align: center;">
                    <h3 style="font-size: 1rem; color: #666; margin-bottom: 10px;">📝 總註冊用戶</h3>
                    <div id="admin-total-users" style="font-size: 3rem; font-weight: bold; color: #2196F3;">0</div>
                    <small style="color: #999;">Total Registered</small>
                </div>

                <div class="stat-card"
                    style="background: #f5f5f5; padding: 30px; border-radius: 8px; text-align: center;">
                    <h3 style="font-size: 1rem; color: #666; margin-bottom: 10px;">✅ 已驗證用戶</h3>
                    <div id="admin-verified-users" style="font-size: 3rem; font-weight: bold; color: #FF9800;">0</div>
                    <small style="color: #999;">Email Verified</small>
                </div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="btn-primary" onclick="app.loadAdminAnalytics()">🔄 重新整理數據</button>
            </div>
        </section>

        <!-- View: Auth (Login/Register) -->
        <section id="auth-view" class="view-section hidden">
            <div class="auth-container"
                style="max-width: 400px; margin: 50px auto; padding: 30px; border: 1px solid #000; border-radius: 4px;">
                <h2 id="auth-title" style="text-align: center; margin-bottom: 20px;">登入 PhotoMission</h2>

                <form id="auth-form">
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" name="email" required placeholder="name@example.com">
                    </div>

                    <div class="form-group">
                        <label>密碼 Password</label>
                        <input type="password" name="password" required placeholder="********">
                        <small style="color: #666; font-size: 0.8em; display: block; margin-top: 5px;">密碼需大於 8
                            碼，並包含英文及數字</small>
                    </div>

                    <div class="form-group hidden" id="nickname-group">
                        <label>暱稱 Nickname</label>
                        <input type="text" name="nickname" placeholder="Your Name">
                    </div>

                    <button type="submit" class="btn-primary" id="auth-submit-btn">登入</button>
                </form>

                <p style="margin-top: 15px; text-align: center; font-size: 0.9em;">
                    <a href="#" id="toggle-auth-mode">沒有帳號？點此註冊</a>
                </p>
            </div>
        </section>

        <!-- View: Check Email (After Registration) -->
        <section id="check-email-view" class="view-section hidden">
            <div class="auth-container"
                style="max-width: 500px; margin: 50px auto; padding: 40px; text-align: center; border: 1px solid #000; border-radius: 4px;">
                <div style="font-size: 4rem; margin-bottom: 20px;">📧</div>
                <h2 style="margin-bottom: 15px;">請檢查您的電子郵件</h2>
                <p style="color: #666; line-height: 1.6; margin-bottom: 25px;">
                    我們已經發送驗證郵件到 <strong id="registered-email"></strong><br>
                    請點擊郵件中的連結以完成帳號驗證。
                </p>
                <div style="background: #f5f5f5; padding: 15px; border-radius: 4px; margin-bottom: 25px;">
                    <p style="font-size: 0.9rem; color: #666; margin: 0;">
                        💡 沒有收到郵件？請檢查垃圾郵件資料夾<br>
                        或點擊下方按鈕重新發送
                    </p>
                </div>
                <button class="btn-primary" onclick="app.handleResendVerification()"
                    style="margin-bottom: 15px;">重新發送驗證郵件</button>
                <p style="font-size: 0.9rem;">
                    <a href="#" onclick="app.showView('auth-view'); return false;">返回登入</a>
                </p>
            </div>
        </section>

        <!-- View: Verify Email (Verification Result) -->
        <section id="verify-email-view" class="view-section hidden">
            <div class="auth-container"
                style="max-width: 500px; margin: 50px auto; padding: 40px; text-align: center; border: 1px solid #000; border-radius: 4px;">
                <div id="verify-status-icon" style="font-size: 4rem; margin-bottom: 20px;">⏳</div>
                <h2 id="verify-status-title" style="margin-bottom: 15px;">驗證中...</h2>
                <p id="verify-status-message" style="color: #666; line-height: 1.6; margin-bottom: 25px;">
                    正在驗證您的電子郵件，請稍候...
                </p>
                <button id="verify-action-btn" class="btn-primary hidden"
                    onclick="app.showView('auth-view')">前往登入</button>
            </div>
        </section>

        <!-- View: Edit Modal -->
        <div id="edit-modal" class="modal hidden">
            <div class="modal-content">
                <h3>編輯作品</h3>
                <input type="hidden" id="edit-submission-id">

                <div class="form-group">
                    <label>更換照片 (可選)</label>
                    <input type="file" id="edit-photo-input" accept="image/*">
                </div>

                <div class="form-group">
                    <label>題材分類</label>
                    <select id="edit-subject-input">
                        <option value="portrait">人像 (Portrait)</option>
                        <option value="landscape">風景 (Landscape)</option>
                        <option value="still">靜物 (Still Life)</option>
                        <option value="street">街拍 (Street)</option>
                        <option value="other">其他</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>心得</label>
                    <textarea id="edit-reflection-input" rows="3"></textarea>
                </div>

                <div class="form-group hidden" style="display: none;">
                    <input type="checkbox" id="edit-is-public" style="width: auto;">
                    <label for="edit-is-public" style="margin: 0;">🌐 公開此作品</label>
                </div>

                <div class="modal-actions">
                    <button id="edit-cancel-btn" class="btn-sm" onclick="app.closeEditModal()">取消</button>
                    <button id="edit-save-btn" class="btn-primary" onclick="app.handleEditSubmission()">儲存變更</button>
                </div>
            </div>
        </div>

        <!-- View: Upload Modal (New) -->
        <div id="upload-modal" class="modal hidden">
            <div class="modal-content">
                <h3>上傳作品 (Free Upload)</h3>
                <form id="free-upload-form" onsubmit="event.preventDefault(); app.handleFreeUpload(event);">
                    <div class="form-group">
                        <label>選擇照片 (Max 5) *</label>
                        <input type="file" id="upload-photos" name="photos" multiple accept="image/*" required>
                    </div>

                    <div class="form-group">
                        <label>題材分類</label>
                        <select id="upload-subject" name="subject">
                            <option value="portrait">人像 (Portrait)</option>
                            <option value="landscape">風景 (Landscape)</option>
                            <option value="still">靜物 (Still Life)</option>
                            <option value="street">街拍 (Street)</option>
                            <option value="other">其他</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>心得</label>
                        <textarea id="upload-reflection" name="reflection" rows="3"
                            placeholder="寫下你的創作想法..."></textarea>
                    </div>

                    <div class="form-group hidden" style="display: none;">
                        <input type="checkbox" id="upload-is-public" name="isPublic" style="width: auto;">
                        <label for="upload-is-public" style="margin: 0;">📢 公開此作品</label>
                    </div>

                    <div class="modal-actions">
                        <button type="button" class="btn-sm"
                            onclick="document.getElementById('upload-modal').classList.add('hidden')">取消</button>
                        <button type="submit" class="btn-primary">上傳</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- View: Message Modal -->
        <div id="message-modal" class="modal hidden">
            <div class="modal-content" style="max-width: 300px; text-align: center;">
                <h3 id="msg-modal-title" style="margin-bottom: 15px;">提示</h3>
                <p id="msg-modal-text" style="white-space: pre-line; margin-bottom: 20px; color: #333;"></p>
                <div class="modal-actions" style="justify-content: center;">
                    <button id="msg-modal-ok-btn" class="btn-primary" style="width: 100%;">確定</button>
                </div>
            </div>
        </div>

        <!-- View: Lightbox Modal (New) -->
        <div id="lightbox-modal" class="modal hidden" onclick="if(event.target === this) this.classList.add('hidden')">
            <div
                style="position: relative; max-width: 90%; max-height: 90%; margin: auto; top: 50%; transform: translateY(-50%); text-align: center;">
                <img id="lightbox-img" src=""
                    style="max-width: 100%; max-height: 85vh; border: 2px solid #fff; box-shadow: 0 0 20px rgba(0,0,0,0.8);">
                <button onclick="document.getElementById('lightbox-modal').classList.add('hidden')"
                    style="position: absolute; top: -40px; right: 0; background: none; border: none; color: white; font-size: 2em; cursor: pointer;">&times;</button>
            </div>
        </div>

    </main>

    <script src="js/eventBus.js"></script>
    <script src="js/componentFactory.js"></script>
    <script src="js/app.js?v=29"></script>

    <!-- Click Tracking Script -->
    <script>
        // Track all clicks on the page for analytics
        document.addEventListener('click', function (e) {
            // Send click event to server (fire and forget)
            fetch('/api/analytics/click', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' }
            }).catch(() => { }); // Silently fail if error
        }, true);
    </script>
</body>

</html>